\section{KT Estimator and Its Applications}
\label{section:kt-estimator}

In this section we show that the potentials associated with Krichevsky-Trofimov
(KT) estimator form a sequence of excellent coin-betting potentials. We then
prove corollaries of the regret bounds for OLO in Hilbert space and learning
with expert advice that we proved in previous sections.

Given a sequence of coin flips $g_1, g_2, \dots, g_{t-1} \in \{+1,1\}$
the KT estimator is
\begin{equation}
\label{equation:kt-estimator}
\beta_t = \frac{\sum_{i=1}^{t-1} g_i}{t} \; .
\end{equation}
More commonly, KT estimator is expressed for a sequence of bits $b_1, b_2,
\dots, b_{t-1} \in \{0,1\}$ as $k_t = \frac{\frac{1}{2} + \sum_{i=1}^{t-1}
b_t}{t}$ and it is used in information theory as an estimator
of the probability of the next bit $b_i$ being $1$. Equation
\eqref{equation:kt-estimator} follows via linear transformation $g_t = 2b_t - 1$
and hence $\beta_t = 2k_t - 1$.

The coin-betting potential corresponding to KT estimator $\beta_t$ is
\begin{equation}
\label{equation:kt-estimator-potential}
F_t(x) = \epsilon \frac{2^t \Gamma(\frac{t+1}{2} + \frac{x}{2}) \Gamma(\frac{t+1}{2} - \frac{x}{2})}{\pi \cdot t!} \; ,
\end{equation}
where $\Gamma(x) = ï¿¼\int_0^\infty t^{-x} e^{-t} dt$ is Euler's gamma function.
The potential is defined on the interval $I_t = (-\frac{t+1}{2},
\frac{t+1}{2})$. Theorem~\ref{theorem:kt-potential} stated in the Appendix shows
that $\{F_t\}_{t=0}^\infty$ is a sequence of coin-betting potentials for initial
endownment $\epsilon$. It also shows that KT estimator, $\beta_t$, as defined by
\eqref{equation:kt-estimator}, is a potential-based strategy, i.e., it satisfies
\eqref{equation:potential-based-strategy}.

\subsection{OLO in Hilbert Space}

\begin{algorithm}[t]
\caption{Online Linear Learning in Hilbert space $\H$}
\begin{algorithmic}
{
\REQUIRE{Initial endowment $\epsilon > 0$}
\STATE{Initialize $\Wealth_0 \leftarrow \epsilon$}
\FOR{$t=1,2,\dots$}
\STATE{Set $w_t \leftarrow \frac{1}{t} \Wealth_{t-1} \sum_{i=1}^{t-1} g_i$}
\STATE{Predict $w_t$}
\STATE{Receive reward vector $g_t \in \H$ such that $\|g_t\| \le 1$}
\STATE{Update $\Wealth_t \leftarrow \Wealth_{t-1} \ + \ \langle g_t, w_t \rangle$}
\ENDFOR
}
\end{algorithmic}
\label{algorithm:kt-hilbert-space-olo}
\end{algorithm}

We apply KT potential for construction of an OLO algorithm in a Hilbert
space $\H$. According to \eqref{equation:hilbert-space-olo}, the resulting algorithm predicts
in round $t$,
$$
w_t = \beta_t \Wealth_{t-1} \frac{\sum_{i=1}^{t-1} g_i}{\norm{\sum_{i=1}^{t-1} g_i}}
$$
where $\beta_t$ is defined by \eqref{equation:potential-based-strategy-hilbert-space}.
According to Theorem~\ref{theorem:kt-potential}, the formula for $\beta_t$ simplifies to
$\beta_t = \frac{\norm{\sum_{i=1}^{t-1} g_i}}{t}$. Hence the prediction becomes
$$
w_t = \frac{1}{t} \Wealth_{t-1} \sum_{i=1}^{t-1} g_i \; .
$$
The algorithm is stated as Algorithm~\ref{algorithm:kt-hilbert-space-olo}. We
can derive a regret bound for this algorithm by applying
Theorem~\ref{theorem:hilbert-space-olo-regret-bound} to the KT potential
\eqref{equation:kt-estimator-potential}.

\begin{corollary}[Regret Bound for Algorithm~\ref{algorithm:kt-hilbert-space-olo}]
TODO
\end{corollary}

\subsection{Learning with Expert Advice}

\begin{algorithm}
\begin{algorithmic}
{
\REQUIRE{Number of experts $N$, and prior distribution $\pi \in \Delta_N$, number of rounds $T$}
\STATE{\bfseries Initialize:} $w_{1,i} \leftarrow 0$
\FOR{$t=1,2,\dots,T$}
  \STATE{For each $i \in [N], \hat{p}_{t,i} = \pi_i [w_{t,i}]_+$}
  \STATE{Predict with $p_t = \hat{p}_t/\norm{\hat{p}}_1$}
  \STATE{Receive loss vector $\ell_t \in [0,1]^N$}
  \STATE{For each $i \in [N]$, set $g_{t,i} = \begin{cases}
    \langle p_t, \ell_t\rangle - \ell_{t,i} & \text{if } w_{t,i} > 0 \\
    [\langle p_t, \ell_t\rangle - \ell_{t,i}]_+ & \text{if } w_{t,i} \le 0
    \end{cases} $}
  \STATE{For each $i \in [N]$, set $w_{t+1,i} = \tfrac{\sum_{j=1}^{t} g_{j,i}}{t+1} \left(1+\sum_{j=1}^{t} w_{j,i} g_{j,i} \right)$}
  \ENDFOR
  }
  \end{algorithmic}
  \caption{Online Learning with Expert Advice based on \ac{KT}-betting.}
  \label{algorithm:kt-experts}
\end{algorithm}

TODO: Fix the algorithm

BLAH BLAH
