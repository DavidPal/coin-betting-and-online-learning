\section{Coin-Betting Potentials}
\label{section:coin-betting-potentials}

We consider betting strategies for the (continuous) coin betting problem. The
type of betting strategies we consider can be viewed as abstractions of
adaptive Kelly betting based on KT estimator. For these strategies
it is possible to prove that for any sequence $g_1, g_2, \dots, g_t \in [-1,1]$,
\begin{equation}
\label{equation:wealth-lower-bound-generic}
\Wealth_t \ge F_t \left( \sum_{i=1}^t g_i \right) \; ,
\end{equation}
where $F_t(x)$ is a certain function. We call such functions \emph{potentials}.
We consider potential based strategy that in round $t$ chooses fraction
\begin{equation}
\label{equation:potential-based-strategy}
\beta_t = \frac{F_t(\sum_{i=1}^{t-1} g_i + 1) - F_t(\sum_{i=1}^{t-1} g_i - 1)}{F_t(\sum_{i=1}^{t-1} g_i + 1) + F_t(\sum_{i=1}^{t-1} g_i - 1)} \; .
\end{equation}
If $F_t(x)$ is positive, $\beta_t \in (-1,1)$ and hence it is a valid
strategy. However, without further conditions on the sequence of potentials
$\{F_t\}_{t=0}^\infty$ is is not clear if the strategy
\eqref{equation:potential-based-strategy} implies the lower bound
\eqref{equation:wealth-lower-bound-generic} on its wealth.

\begin{definition}[Coin-Betting Potential]
\label{definition:potential}
Let $\epsilon > 0$. Let $\{F_t\}_{t=0}^\infty$ be a sequence of functions
$F_t:I_t  \to \R_+$ where $I_t = (-a_t, a_t)$ is an open symmetric interval\footnote{We allow $a_t = +\infty$.} containing
$[-t,t]$.  The sequence is called a \emph{sequence of coin-betting potentials}
for \emph{initial endowment $\epsilon$}, if it satisfies the following three conditions:
\begin{enumerate}[(1)]
\item $F_0(0) = \epsilon$.

\item For every $t \ge 1$, $F_t(x)$ is even, logarithmically convex, strictly increasing on $[0,a_t)$, and
\begin{equation}
\label{equation:potential-limit-assumption}
\lim_{x \to -a_t} F_t(x) = \lim_{x \to a_t} F_t(x) = +\infty \; .
\end{equation}

\item For every $t \ge 1$, every $x \in [-(t-1), (t-1)]$ and every $g \in [-1,1]$,
$$
\left(1 + g \frac{F_t(x + 1) - F_t(x - 1)}{F_t(x + 1) + F_t(x - 1)} \right) F_{t-1}(x) \ge F_t(x+g) \; .
$$
\end{enumerate}
The sequence $\{F_t\}_{t=0}^\infty$  is called is called the sequence of
\emph{sequence of excellent coin-betting potentials} for \emph{initial endowment
$\epsilon$} if it satifies conditions (1)--(3) and the condition (4) below.
\begin{enumerate}[(1)]
\setcounter{enumi}{3}
\item For every $t \ge 0$, $F_t$ is twice-differentiable and
satisfies $x \cdot F_t''(x) \ge F_t'(x)$ for every $x \in I_t$.
\end{enumerate}
\end{definition}

It is a routine exercise to show by induction on $t$ that conditions 2 and 3
of the definition together with recurrence \eqref{equation:wealth-recurrence}
imply that the \emph{potential based strategy}
\eqref{equation:potential-based-strategy} satisfies
\eqref{equation:wealth-lower-bound-generic}. The base case $t=0$, is trivial.
For $t \ge 1$, if we let $x = \sum_{i=1}^{t-1} g_i$, then
$$
\Wealth_t
= (1+g_t \beta_t) \Wealth_{t-1}
\ge (1 + g_t \beta_t) F_{t-1}(x)
\ge F_t(x + g_t)
= F_t \left( \sum_{t=1}^T g_t \right) \; .
$$

The formula for the potential-based
strategy~\eqref{equation:potential-based-strategy} seems mystical. It
can be derived by considering the inequality
$$
(1+g_t\beta_t) F_{t-1}(x) \ge F_{t-1}(x + g_t)
$$
used in the induction proof above. Dividing through $1+g_t\beta_t$, the left-hand
side becomes independent of $g_t$ and $\beta_t$ and the right-hand side becomes
$$
h(g_t, \beta_t) = \frac{F_{t-1}(x + g_t)}{1 + g_t\beta_t}
$$
a function of $\beta_t$ and $g_t$. Since $g_t \in [-1,1]$ is chosen by an
adversary, our best hope is to find $\beta_t$ that minimizes $\max_{g_t \in
[-1,1]} h(g_t,\beta_t)$. Solution of this problem is \eqref{equation:potential-based-strategy};
see Theorem~\ref{theo:opt_beta} in the Appendix~\ref{section:optimal-betting-fraction}.

We show concrete examples of sequences of coin-betting potentials in
Section~\ref{section:kt-estimator}.
